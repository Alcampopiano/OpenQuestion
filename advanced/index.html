


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../img/vp_inv.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.8">
    
    
      
        <title>Advanced - OpenQuestion</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.01afc2df.min.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#000000">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../stylesheets/al_extra.css">
    
      <link rel="stylesheet" href="https://unpkg.com/mermaid@7.1.2/dist/mermaid.css">
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-xxxxxxxx","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview",document.location.pathname)})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="black" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#advanced-usage" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="OpenQuestion" class="md-header-nav__button md-logo" aria-label="OpenQuestion">
      
  <img src="../img/vp.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            OpenQuestion
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Advanced
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/Alcampopiano/OpenQuestion" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    <i class="fa fa-github"></i> Github
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="OpenQuestion" class="md-nav__button md-logo" aria-label="OpenQuestion">
      
  <img src="../img/vp.png" alt="logo">

    </a>
    OpenQuestion
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/Alcampopiano/OpenQuestion" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    <i class="fa fa-github"></i> Github
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../installation/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../survey_dev/" title="Survey Development" class="md-nav__link">
      Survey Development
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../widgets/" title="Widgets" class="md-nav__link">
      Widgets
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../settings/" title="Settings" class="md-nav__link">
      Settings
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Advanced
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Advanced" class="md-nav__link md-nav__link--active">
      Advanced
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#accessing-the-python-shell-for-administrators" class="md-nav__link">
    Accessing the Python Shell (for administrators)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accessing-the-python-shell-for-survey-developers" class="md-nav__link">
    Accessing the Python Shell (for survey developers)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json-representation-of-surveys" class="md-nav__link">
    JSON representation of surveys
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-surveys-table" class="md-nav__link">
    Using the Surveys table
  </a>
  
    <nav class="md-nav" aria-label="Using the Surveys table">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-a-survey" class="md-nav__link">
    Adding a survey
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deleting-a-survey" class="md-nav__link">
    Deleting a survey
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modifying-a-survey" class="md-nav__link">
    Modifying a survey
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-users-table" class="md-nav__link">
    Using the Users table
  </a>
  
    <nav class="md-nav" aria-label="Using the Users table">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-a-user" class="md-nav__link">
    Adding a user
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deleting-a-user" class="md-nav__link">
    Deleting a user
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-data-to-submissions-using-query-strings" class="md-nav__link">
    Adding data to submissions using query strings:
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#accessing-the-python-shell-for-administrators" class="md-nav__link">
    Accessing the Python Shell (for administrators)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accessing-the-python-shell-for-survey-developers" class="md-nav__link">
    Accessing the Python Shell (for survey developers)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json-representation-of-surveys" class="md-nav__link">
    JSON representation of surveys
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-surveys-table" class="md-nav__link">
    Using the Surveys table
  </a>
  
    <nav class="md-nav" aria-label="Using the Surveys table">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-a-survey" class="md-nav__link">
    Adding a survey
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deleting-a-survey" class="md-nav__link">
    Deleting a survey
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modifying-a-survey" class="md-nav__link">
    Modifying a survey
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-users-table" class="md-nav__link">
    Using the Users table
  </a>
  
    <nav class="md-nav" aria-label="Using the Users table">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-a-user" class="md-nav__link">
    Adding a user
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deleting-a-user" class="md-nav__link">
    Deleting a user
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-data-to-submissions-using-query-strings" class="md-nav__link">
    Adding data to submissions using query strings:
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="advanced-usage">Advanced usage<a class="headerlink" href="#advanced-usage" title="Permanent link">&para;</a></h1>
<p>OpenQuestion's GUI can handle standard survey development and therefore this section is
only intended for more advanced use cases. Where noted, certain topics are relevent only to
OpenQuestion's administrator(s).</p>
<h2 id="accessing-the-python-shell-for-administrators">Accessing the Python Shell (for administrators)<a class="headerlink" href="#accessing-the-python-shell-for-administrators" title="Permanent link">&para;</a></h2>
<p>From the command line (where the OpenQuestion is below the current directory) run the app server 
with the <code>--shell</code> option. This will drop you into a Python interpreter that has access to
OpenQuestion's priviledged code and database. </p>
<div class="highlight"><pre><span></span><code>anvil-app-server --app OpenQuestion --shell
</code></pre></div>

<h2 id="accessing-the-python-shell-for-survey-developers">Accessing the Python Shell (for survey developers)<a class="headerlink" href="#accessing-the-python-shell-for-survey-developers" title="Permanent link">&para;</a></h2>
<p>Developers can also interact with OpenQuestion's server code and databases from Python.
The administrator must first generate 
a token (a so-called <a href="https://anvil.works/docs/uplink">Uplink</a> key) and associate it with 
OpenQuestion as follows:</p>
<div class="highlight"><pre><span></span><code> anvil-app-server --app OpenQuestion --uplink-key &lt;you-secret-key&gt;
</code></pre></div>

<div class="admonition danger">
<p class="admonition-title">Admins, be careful when creating an Uplink key</p>
<p>Uplink keys should be long, secure, and random. Do not share the key
with anyone except for those who you want to have access to
OpenQuestion's privileged server code and databases</p>
</div>
<p>Developers can now connect to OpenQuestion with Python code by following these steps:</p>
<div class="highlight"><pre><span></span><code>pip install anvil-uplink
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">anvil.server</span>

<span class="c1"># connecting to OpenQuestion</span>
<span class="n">anvil</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;[uplink-key goes here]&quot;</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="s2">&quot;ws://your-runtime-server:3030/_/uplink&quot;</span><span class="p">)</span><span class="err">`</span>
</code></pre></div>

<p>Once sucessfully connected, developers will have priviledged access to OpenQuestion's server code
and databases from their Python environment.</p>
<h2 id="json-representation-of-surveys">JSON representation of surveys<a class="headerlink" href="#json-representation-of-surveys" title="Permanent link">&para;</a></h2>
<p>OpenQuestion represents surveys as a Python dictionary (stored as a JSON object in the backend database). The following
two examples show the <code>dict</code> representation of two surveys: one that is simple, followed by one that is more complex.
By studying these structures, one can learn how to create and modify surveys programatically 
(also, see the sections pertaining to working with the Surveys table). </p>
<p>In general, the survey <code>dict</code> is a nested, somewhat self-similar structure. For example,</p>
<ul>
<li>The survey itself contains sections (a type of widget)</li>
<li>Sections contain the typical UI widgets (e.g., text_box, drop_down, etc)</li>
<li>The UI widgets contain all of the properties set in the survey designer 
(title, placeholder, mandatory flag, branching logic, etc)</li>
</ul>
<details class="example"><summary>Simple survey (click)</summary><div class="highlight"><pre><span></span><code><span class="n">my_survey</span><span class="o">=</span><span class="p">{</span>
<span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;simple survey&quot;</span><span class="p">,</span>
<span class="s2">&quot;widgets&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="p">{</span>
  <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;section&quot;</span><span class="p">,</span>
  <span class="s2">&quot;logic&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
  <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;section&quot;</span><span class="p">,</span>
  <span class="s2">&quot;widgets&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text_box&quot;</span><span class="p">,</span>
      <span class="s2">&quot;logic&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
      <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;what&#39;s your name?&quot;</span><span class="p">,</span>
      <span class="s2">&quot;number&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
      <span class="s2">&quot;mandatory&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
      <span class="s2">&quot;placeholder&quot;</span><span class="p">:</span> <span class="s2">&quot;placeholder here&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
<span class="p">],</span>
<span class="s2">&quot;num_widgets&quot;</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">}</span>
</code></pre></div>

</details>
<details class="example"><summary>A more complex survey (click)</summary><div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;science survey&quot;</span><span class="p">,</span>
<span class="s2">&quot;widgets&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="p">{</span>
  <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;section&quot;</span><span class="p">,</span>
  <span class="s2">&quot;logic&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
  <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;About you&quot;</span><span class="p">,</span>
  <span class="s2">&quot;widgets&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;This is a survey about **you** and **science**.</span><span class="se">\n\n</span><span class="s2">For more information about science click [here](https://en.wikipedia.org/wiki/Science).</span><span class="se">\n\n</span><span class="s2">- these </span><span class="se">\n</span><span class="s2">- are </span><span class="se">\n</span><span class="s2">- bullets</span><span class="se">\n\n</span><span class="s2">This is scientifically proven to be the cutest image:</span><span class="se">\n\n</span><span class="s2">&lt;img src=</span><span class="se">\&quot;</span><span class="s2">https://i.imgur.com/gPb2phg.gif</span><span class="se">\&quot;</span><span class="s2"> width=</span><span class="se">\&quot;</span><span class="s2">191</span><span class="se">\&quot;</span><span class="s2"> height=</span><span class="se">\&quot;</span><span class="s2">200</span><span class="se">\&quot;</span><span class="s2">&gt;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">,</span>
      <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;markdown&quot;</span><span class="p">,</span>
      <span class="s2">&quot;logic&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
      <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;placeholder&quot;</span><span class="p">:</span> <span class="s2">&quot;markdown supported&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
      <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text_box&quot;</span><span class="p">,</span>
      <span class="s2">&quot;logic&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
      <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;What is your name?&quot;</span><span class="p">,</span>
      <span class="s2">&quot;number&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
      <span class="s2">&quot;mandatory&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
      <span class="s2">&quot;placeholder&quot;</span><span class="p">:</span> <span class="s2">&quot;name goes here&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
      <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;date&quot;</span><span class="p">,</span>
      <span class="s2">&quot;logic&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
      <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;What is your date of birth?&quot;</span><span class="p">,</span>
      <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span>
      <span class="s2">&quot;mandatory&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
      <span class="s2">&quot;placeholder&quot;</span><span class="p">:</span> <span class="s2">&quot;date goes here&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
      <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text_area&quot;</span><span class="p">,</span>
      <span class="s2">&quot;logic&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
      <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Tell me about yourself&quot;</span><span class="p">,</span>
      <span class="s2">&quot;placeholder&quot;</span><span class="p">:</span> <span class="s2">&quot;text goes here&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
      <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;drop_down&quot;</span><span class="p">,</span>
      <span class="s2">&quot;logic&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
      <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;What is your highest completed educational level?&quot;</span><span class="p">,</span>
      <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="s2">&quot;high school diploma</span><span class="se">\n</span><span class="s2">college diploma or university degree</span><span class="se">\n</span><span class="s2">I have do not have a high school diploma&quot;</span><span class="p">,</span>
      <span class="s2">&quot;mandatory&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
      <span class="s2">&quot;placeholder&quot;</span><span class="p">:</span> <span class="s2">&quot;select from here&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span>
      <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;radio_button&quot;</span><span class="p">,</span>
      <span class="s2">&quot;logic&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
      <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Are you interested in science?&quot;</span><span class="p">,</span>
      <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="s2">&quot;Yes</span><span class="se">\n</span><span class="s2">No&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">},</span>
<span class="p">{</span>
  <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;section&quot;</span><span class="p">,</span>
  <span class="s2">&quot;logic&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
  <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;About you and science&quot;</span><span class="p">,</span>
  <span class="s2">&quot;widgets&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
      <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;check_box&quot;</span><span class="p">,</span>
      <span class="s2">&quot;logic&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
      <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Which scientific topics are you interested in? (check all that apply)&quot;</span><span class="p">,</span>
      <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="s2">&quot;mathematics</span><span class="se">\n</span><span class="s2">geography</span><span class="se">\n</span><span class="s2">data science</span><span class="se">\n</span><span class="s2">statistics</span><span class="se">\n</span><span class="s2">physics</span><span class="se">\n</span><span class="s2">neuroscience&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;labels&quot;</span><span class="p">:</span> <span class="s2">&quot;not satisfied</span><span class="se">\n</span><span class="s2">meh</span><span class="se">\n</span><span class="s2">very satisfied&quot;</span><span class="p">,</span>
      <span class="s2">&quot;min_val&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
      <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;50&quot;</span><span class="p">,</span>
      <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;slider&quot;</span><span class="p">,</span>
      <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;How satisfied were you with your last science course? &quot;</span><span class="p">,</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="s2">&quot;logic&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
      <span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
      <span class="s2">&quot;max_val&quot;</span><span class="p">:</span> <span class="s2">&quot;100&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
      <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text_area&quot;</span><span class="p">,</span>
      <span class="s2">&quot;logic&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;func&quot;</span><span class="p">:</span> <span class="s2">&quot;any&quot;</span><span class="p">,</span>
        <span class="s2">&quot;conditions&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
            <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;How satisfied were you with your last science course? &quot;</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span>
            <span class="s2">&quot;comparison&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;&quot;</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">},</span>
      <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;In your opinion, what would improve science education?&quot;</span><span class="p">,</span>
      <span class="s2">&quot;placeholder&quot;</span><span class="p">:</span> <span class="s2">&quot;Explain here&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
<span class="p">],</span>
<span class="s2">&quot;num_widgets&quot;</span><span class="p">:</span> <span class="mi">22</span>
<span class="p">}</span>
</code></pre></div>

</details>
<h2 id="using-the-surveys-table">Using the Surveys table<a class="headerlink" href="#using-the-surveys-table" title="Permanent link">&para;</a></h2>
<p>The Surveys table contains all surveys that are created in OpenQuestion.</p>
<div class="admonition note">
<p class="admonition-title">Interacting with tables</p>
<p>For more information on the the API used for interacting with tables, 
please see Anvil's <a href="https://anvil.works/docs/data-tables/data-tables-in-code">DataTables documentation</a>.</p>
</div>
<p>The Surveys table has the following columns:</p>
<ul>
<li><em>survey_id</em>: A long, random, secure, and unique string</li>
<li><em>title</em>: The survey title</li>
<li><em>last_modified</em>: A Python datetime object</li>
<li><em>schema</em>: A JSON representation of the survey's structure (does not contain submission data)</li>
<li><em>submissions</em>: A CSV <a href="https://anvil.works/docs/media">media object</a> which accumulates submissions</li>
<li><em>opening_date</em>: A Python datetime object for an opening date</li>
<li><em>closing_date</em>: A Python datetime object for an closing date</li>
<li><em>thank_you_msg</em>: A string of Markdown text for the thank you message</li>
</ul>
<h3 id="adding-a-survey">Adding a survey<a class="headerlink" href="#adding-a-survey" title="Permanent link">&para;</a></h3>
<p>The following example demonstrates how to programatically add a survey to the Surveys table.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">anvil.tables</span> <span class="kn">import</span> <span class="n">app_tables</span>

<span class="n">my_survey</span><span class="o">=</span><span class="p">{</span>
  <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;simple survey&quot;</span><span class="p">,</span>
  <span class="s2">&quot;widgets&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;section&quot;</span><span class="p">,</span>
      <span class="s2">&quot;logic&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
      <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;section&quot;</span><span class="p">,</span>
      <span class="s2">&quot;widgets&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text_box&quot;</span><span class="p">,</span>
          <span class="s2">&quot;logic&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
          <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;what&#39;s your name?&quot;</span><span class="p">,</span>
          <span class="s2">&quot;number&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
          <span class="s2">&quot;mandatory&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
          <span class="s2">&quot;placeholder&quot;</span><span class="p">:</span> <span class="s2">&quot;placeholder here&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">&quot;num_widgets&quot;</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">}</span>

<span class="n">app_tables</span><span class="o">.</span><span class="n">surveys</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span>
    <span class="n">survey_id</span><span class="o">=</span><span class="s1">&#39;you secure survey ID&#39;</span><span class="p">,</span> <span class="c1"># A long, random, secure, and unique string</span>
    <span class="n">title</span><span class="o">=</span><span class="s1">&#39;simple survey&#39;</span><span class="p">,</span> 
    <span class="n">schema</span><span class="o">=</span><span class="n">my_survey</span><span class="p">,</span> <span class="c1"># A Python dictionary following OpenQuestion&#39;s expected format</span>
    <span class="n">submissions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">opening_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">closing_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">thank_you_msg</span><span class="o">=</span><span class="s1">&#39;# Thank you!&#39;</span><span class="p">)</span> <span class="c1"># Markdown goes here</span>
</code></pre></div>

<h3 id="deleting-a-survey">Deleting a survey<a class="headerlink" href="#deleting-a-survey" title="Permanent link">&para;</a></h3>
<p>The following example demonstrates how to programatically delete a survey from the Surveys table.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">anvil.tables</span> <span class="kn">import</span> <span class="n">app_tables</span>

<span class="c1"># Searching based on title property but any other search parameter can be used. </span>
<span class="c1"># See Anvil&#39;s Datatable documentation https://anvil.works/docs/data-tables/data-tables-in-code</span>
<span class="n">row</span><span class="o">=</span><span class="n">app_tables</span><span class="o">.</span><span class="n">surveys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;simple survey&#39;</span><span class="p">)</span>
<span class="n">row</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</code></pre></div>

<h3 id="modifying-a-survey">Modifying a survey<a class="headerlink" href="#modifying-a-survey" title="Permanent link">&para;</a></h3>
<p>The following example demonstrates how to programatically modify a survey from the Surveys table.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">anvil.tables</span> <span class="kn">import</span> <span class="n">app_tables</span>

<span class="n">row</span><span class="o">=</span><span class="n">app_tables</span><span class="o">.</span><span class="n">surveys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;simple survey&#39;</span><span class="p">)</span>

<span class="c1"># modifying the survey&#39;s title</span>
<span class="n">row</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;My new title&#39;</span>
</code></pre></div>

<h2 id="using-the-users-table">Using the Users table<a class="headerlink" href="#using-the-users-table" title="Permanent link">&para;</a></h2>
<p>OpenQuestion stores developer and administrator information in the Users table. Note that
users in this case refers to survey developers and app admins (not end users who fill out the survey).</p>
<h3 id="adding-a-user">Adding a user<a class="headerlink" href="#adding-a-user" title="Permanent link">&para;</a></h3>
<p>Please see <a href="../installation/#adding-developers-and-administrators-as-users">this</a> 
section on adding developers and admins as users in OpenQuestion.</p>
<h3 id="deleting-a-user">Deleting a user<a class="headerlink" href="#deleting-a-user" title="Permanent link">&para;</a></h3>
<p>Users can be deleted from the Users table as follows:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># get a user from the Users table</span>
<span class="n">some_user</span><span class="o">=</span><span class="n">app_tables</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">email</span><span class="o">=</span><span class="s1">&#39;your_username@example.com&#39;</span><span class="p">)</span>
<span class="n">some_user</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</code></pre></div>

<h2 id="adding-data-to-submissions-using-query-strings">Adding data to submissions using query strings:<a class="headerlink" href="#adding-data-to-submissions-using-query-strings" title="Permanent link">&para;</a></h2>
<p>OpenQuestion allows survey developers to add additional data 
to a submission by accepting a <a href="https://en.wikipedia.org/wiki/Query_string">query string</a>
in the survey's URL.</p>
<p>For example, in addition to the form's ID, the following survey
passes <code>foo=42</code>, along with the data that is inputted by an end user, 
to the submissions table.</p>
<p><code>https://your-app-url/#?form_id=&lt;uuid&gt;&amp;foo=42</code>   </p>
<p>This example uses a long query string. That is, it also passes <code>bar=baz</code> to
the submission's table.</p>
<p><code>https://your-app-url/#?form_id=&lt;uuid&gt;&amp;foo=42&amp;bar=baz</code>   </p>
<p>When an end user submits a response a new column is created for every parameter 
in the query string and the new row in the submissions table will contain the value(s). When a 
parameter matches an existing column header in the submissions table, 
the parameter's value is merged (a new column is not created). Note that query strings 
can be unique to each submission since new paramerters are added as new columns.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../settings/" title="Settings" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Settings
              </div>
            </div>
          </a>
        
        
          <a href="../faq/" title="FAQ" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                FAQ
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            OpenQuestion is licensed under the <a href='https://github.com/Alcampopiano/OpenQuestion/blob/master/LICENSE'>BSD 3-Clause license
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.fae956e7.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>